# ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº Node.js å’Œ React çš„å®Œæ•´ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼Œå®ç°äº†ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€éªŒè¯ç éªŒè¯ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›äº†å®Œæ•´çš„ API æ¥å£å’Œç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- ğŸ“± **æ‰‹æœºå·æ³¨å†Œ/ç™»å½•**ï¼šæ”¯æŒæ‰‹æœºå·ç æ ¼å¼éªŒè¯
- ğŸ” **éªŒè¯ç éªŒè¯**ï¼šçŸ­ä¿¡éªŒè¯ç å‘é€ä¸éªŒè¯ï¼ˆæµ‹è¯•ç¯å¢ƒä½¿ç”¨å›ºå®šéªŒè¯ç ï¼‰
- ğŸ”‘ **å¯†ç ç™»å½•**ï¼šæ”¯æŒå¯†ç ç™»å½•æ–¹å¼
- ğŸ›¡ï¸ **JWT è®¤è¯**ï¼šåŸºäº JSON Web Token çš„èº«ä»½éªŒè¯
- ğŸ“Š **æ•°æ®æŒä¹…åŒ–**ï¼šSQLite æ•°æ®åº“å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
- âœ… **å®Œæ•´æµ‹è¯•**ï¼šåŒ…å«å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **è¿è¡Œç¯å¢ƒ**ï¼šNode.js 16+
- **Webæ¡†æ¶**ï¼šExpress.js
- **æ•°æ®åº“**ï¼šSQLite3
- **èº«ä»½éªŒè¯**ï¼šJWT (jsonwebtoken)
- **æµ‹è¯•æ¡†æ¶**ï¼šJest + Supertest
- **å¼€å‘å·¥å…·**ï¼šNodemon

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**ï¼šReact 18 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite
- **æ ·å¼**ï¼šCSS3 + ç°ä»£åŒ–UIè®¾è®¡
- **æµ‹è¯•**ï¼šJest + React Testing Library
- **å¼€å‘æœåŠ¡å™¨**ï¼šVite Dev Server

### æ•°æ®åº“è®¾è®¡
- **users è¡¨**ï¼šå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆIDã€æ‰‹æœºå·ã€å¯†ç ã€åˆ›å»ºæ—¶é—´ï¼‰
- **verification_codes è¡¨**ï¼šå­˜å‚¨éªŒè¯ç ä¿¡æ¯ï¼ˆæ‰‹æœºå·ã€éªŒè¯ç ã€è¿‡æœŸæ—¶é—´ã€ä½¿ç”¨çŠ¶æ€ï¼‰

## é¡¹ç›®ç»“æ„

```
test/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app.js          # Express åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“æ¨¡å—
â”‚   â”‚   â”‚   â””â”€â”€ database.js # SQLite æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â””â”€â”€ routes/         # API è·¯ç”±
â”‚   â”‚       â””â”€â”€ auth.js     # è®¤è¯ç›¸å…³ API
â”‚   â”œâ”€â”€ test/               # åç«¯æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ database.test.js
â”‚   â”‚   â”œâ”€â”€ auth.test.js
â”‚   â”‚   â””â”€â”€ auth-password-simple.test.js
â”‚   â”œâ”€â”€ package.json        # åç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx         # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.tsx        # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ styles/         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ test/               # å‰ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ package.json        # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts      # Vite é…ç½®
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0

### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
npm install

# å®‰è£…å‰ç«¯ä¾èµ–
cd ../frontend
npm install
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

åç«¯æœåŠ¡è¿è¡Œåœ¨ï¼š`http://localhost:3000`

### 3. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
cd frontend

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨è¿è¡Œåœ¨ï¼š`http://localhost:5173`

## æµ‹è¯•æŒ‡å—

### åç«¯æµ‹è¯•

```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- test/database.test.js
npm test -- test/routes/auth.test.js
npm test -- test/auth-password-simple.test.js
```

**æµ‹è¯•è¦†ç›–èŒƒå›´ï¼š**
- æ•°æ®åº“æ“ä½œï¼ˆç”¨æˆ·åˆ›å»ºã€éªŒè¯ç å­˜å‚¨ã€éªŒè¯ç­‰ï¼‰
- API æ¥å£ï¼ˆæ³¨å†Œã€ç™»å½•ã€éªŒè¯ç å‘é€ï¼‰
- é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
- èº«ä»½éªŒè¯å’Œæˆæƒ

**æµ‹è¯•ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨å†…å­˜æ•°æ®åº“ï¼Œæµ‹è¯•éš”ç¦»
- ä¸²è¡Œæ‰§è¡Œï¼Œé¿å…å¹¶å‘å†²çª
- æµ‹è¯•ç¯å¢ƒä½¿ç”¨å›ºå®šéªŒè¯ç  `123456`

### å‰ç«¯æµ‹è¯•

```bash
cd frontend

# è¿è¡Œå‰ç«¯æµ‹è¯•
npm test
```

## API æ¥å£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:3000/api/auth`
- **Content-Type**: `application/json`

### æ¥å£åˆ—è¡¨

#### å‘é€éªŒè¯ç 
```http
POST /send-verification-code
{
  "phoneNumber": "13800138000"
}
```

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /register
{
  "phoneNumber": "13800138000",
  "verificationCode": "123456",
  "password": "password123",
  "confirmPassword": "password123",
  "agreement": true
}
```

#### éªŒè¯ç ç™»å½•
```http
POST /login
{
  "phoneNumber": "13800138000",
  "verificationCode": "123456"
}
```

#### å¯†ç ç™»å½•
```http
POST /login-password
{
  "phoneNumber": "13800138000",
  "password": "password123"
}
```

## å¼€å‘è¯´æ˜

### éªŒè¯ç æœºåˆ¶
- **æµ‹è¯•ç¯å¢ƒ**ï¼šä½¿ç”¨å›ºå®šéªŒè¯ç  `123456`
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šç”Ÿæˆ 6 ä½éšæœºæ•°å­—éªŒè¯ç 
- **æœ‰æ•ˆæœŸ**ï¼š5 åˆ†é’Ÿ
- **ä½¿ç”¨é™åˆ¶**ï¼šç”Ÿäº§ç¯å¢ƒä¸€æ¬¡æ€§ä½¿ç”¨ï¼Œæµ‹è¯•ç¯å¢ƒå¯é‡å¤ä½¿ç”¨

### æ•°æ®åº“
- **å¼€å‘ç¯å¢ƒ**ï¼šSQLite æ–‡ä»¶æ•°æ®åº“ (`backend/database.sqlite`)
- **æµ‹è¯•ç¯å¢ƒ**ï¼šå†…å­˜æ•°æ®åº“ï¼Œæ¯ä¸ªæµ‹è¯•ç‹¬ç«‹å®ä¾‹

### ç¯å¢ƒé…ç½®
åœ¨ `backend` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
NODE_ENV=development
PORT=3000
JWT_SECRET=your-secure-secret-key
DB_PATH=./database.sqlite
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ç«¯å£å ç”¨**ï¼šæ£€æŸ¥ 3000 å’Œ 5173 ç«¯å£æ˜¯å¦è¢«å ç”¨
2. **ä¾èµ–é—®é¢˜**ï¼šåˆ é™¤ `node_modules` é‡æ–°å®‰è£…
3. **æ•°æ®åº“é”™è¯¯**ï¼šåˆ é™¤ `backend/database.sqlite` é‡æ–°å¯åŠ¨
4. **æµ‹è¯•å¤±è´¥**ï¼šç¡®ä¿ Node.js ç‰ˆæœ¬ç¬¦åˆè¦æ±‚

### å¼€å‘å»ºè®®
- éµå¾ªç°æœ‰ä»£ç é£æ ¼å’Œè§„èŒƒ
- æ–°åŠŸèƒ½å¼€å‘å‰ç¼–å†™æµ‹è¯•ç”¨ä¾‹
- ä¿æŒ API æ¥å£çš„ RESTful è®¾è®¡
- å®Œå–„é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒ